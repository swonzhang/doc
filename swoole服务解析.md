

epoll监听文件描述符的读写

下面这句话有问题，worker是否同步异步，是看自己的代码处理实现的

worker是异步的，也就是说出现i/o时，会直接通过epoll挂起，继续接收请求，那么在worker里面，发起个异步任务，对worker来说，他会做什么处理？或者说是这个异步任务不会造成任何阻塞问题，继续向下执行，而异步任务是通过回调函数来处理结果。（这就解决了在php-fpm的模式下需要跑脚本的情况，例如，发邮件、大文件读写、会造成i/o耗时较长的操作。）如果不用异步任务，这个请求就无法及时返回，最终甚至超时。但对worker的处理请求影响不大，毕竟他也是异步的。综上所诉，使用swoole和nginx作对比，事件模式两者都是用的reactor模式，并发模式，两者都是半同步半异步模式，就是异步接收请求，同步处理事件




swoole框架，由于是常驻内存的，所以一次实例化，他的每一次添加、或者删除、修改变量，都会对全局产生影响？（单例模式）


swoole 和 php-fpm

进程模型是相同的，manager就是负责管理子进程的创建和回收。但php-fpm的worker进程是同步阻塞的，swoole的worker进程是异步非阻塞的。

http-server和fpm的差异是http-server是内存常驻的，PHP程序变成长生命周期的了。变量和对象在使用请求结束后并不会销毁，可以复用。



注意协程，不是异步，本质上协程都是阻塞的

所以说 业务处理模式时，在 同步和异步 中，协程就是最好的选择了。

这里所说的都是 onRequest里的处理：

同步存在阻塞，并发低
异步不存在阻塞，但处理业务困难，只能处理回调，
协程 适用于存在多个 i/o 时，大显身手，只会耗时使用时间最长的时间。注意(每个请求的实际时间不会变，只是不会阻塞在某一条请求上而已)
看下鸟哥 协程处理的形式  (http://www.laruence.com/2015/05/28/3038.html)

#swoole 自行实现了 调度器 

1、swoole 的 worker 是如何并发处理多个请求的  -》 回答： 是异步处理的
2、那为什么说到 一旦在worker里面使用同步模式代码，那么整个worker就会变成同步模式



了解 总线 概念 ， 地址总线，数据总线， 控制总线


1、就算是多个请求过来， 自上而下执行，倘若某一条请求存在阻塞，那么整个worker就会变成同步模式? 参考 （switch 条件）

2、或者说，每个请求过来，都是异步处理的，异步是回调作用，所以说应该是每个请求是相隔离的，即是存在某条请求阻塞，也不会影响到其他的请求